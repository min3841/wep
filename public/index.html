<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weapon Challenger | WebGL Demo</title>
  <style>
    :root{
      --bg:#0f1220; --card:#181c2f; --soft:#242a43; --text:#eef1ff; --muted:#b8c0ff; --accent:#7aa2ff;
      --ok:#44d19f; --warn:#ffd166;
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; padding:0;}
    body {
      font-family: ui-sans-serif, system-ui, AppleSDGothicNeo, 'Segoe UI', Pretendard, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      background: linear-gradient(180deg,#0c1023 0%, #0f1220 40%, #0f1220 100%);
      padding-top: 60px;
    }

    header {
      position: fixed; top: 0; left: 0; right: 0; z-index: 50;
      backdrop-filter: saturate(140%) blur(8px);
      background: rgba(15, 18, 32, .7);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .banner {
      max-width:1200px; margin:0 auto; padding:14px 18px;
      display:flex; align-items:center; gap:18px;
    }
    .logo { display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px; }
    .logo i { width:28px; height:28px; border-radius:8px; display:inline-block;
      background:linear-gradient(135deg,#6ea8ff,#9a7bff);
      box-shadow:0 6px 18px rgba(122,162,255,.35);
    }
    nav{margin-left:auto}
    nav a, nav button {
      color:var(--text); text-decoration:none; font-weight:600;
      padding:10px 12px; border-radius:12px; background:none; border:none;
      cursor:pointer; font-size:16px; transition:.2s ease;
    }
    nav a:hover, nav button:hover { background:rgba(255,255,255,.08) }
    nav a.active { color:#fff; background:linear-gradient(135deg,#6ea8ff,#7aa2ff) }

    .wrap{ max-width:1500px; margin:28px auto 80px; padding:0 18px }
    .section-title{ font-size:28px; margin:22px 0 14px }
    .muted{ color:var(--muted) }

    .game-card{ background:var(--card); border-radius:var(--radius); box-shadow:0 20px 50px rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.06); padding:16px; }
    .frame{ background:var(--soft); border-radius:14px; border:2px solid rgba(255,255,255,.08); padding:0; overflow:hidden; }
    .stage{ position:relative; width:100%; aspect-ratio:16/9; background:#000; }
    .stage iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; }

    .cards{ margin-top:22px; display:grid; grid-template-columns:repeat(12,1fr); gap:18px; }
    .card{ background:var(--card); border-radius:16px; padding:18px; border:1px solid rgba(255,255,255,.06); }
    .card h3{ margin:0 0 10px }
    .card ul{ margin:8px 0 0 18px }
    .grid-12{ grid-column:span 12 }
    .grid-6{ grid-column:span 6 }
    .grid-4{ grid-column:span 4 }
    .grid-8{ grid-column:span 8 }
    @media (max-width:960px){ .grid-6,.grid-4{ grid-column:span 12 } }

    table{ width:100%; border-collapse:collapse; font-size:14.5px; overflow:hidden; border-radius:12px; border:1px solid rgba(255,255,255,.06); }
    thead th{ background:linear-gradient(180deg,rgba(122,162,255,.22),rgba(122,162,255,.08)); color:#fff; text-align:left; padding:12px; font-weight:700; }
    tbody td{ padding:10px 12px; border-top:1px solid rgba(255,255,255,.06) }
    tbody tr:nth-child(even){ background:rgba(255,255,255,.03) }

    footer{ margin-top:34px; padding:28px 0 60px; border-top:1px solid rgba(255,255,255,.08) }
    .comment-box{ background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:16px; }
    .comment-box form{ display:grid; gap:10px; margin-bottom:16px }
    .comment-box input,.comment-box textarea{ width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:var(--soft); color:var(--text) }
    .comment-box button{ justify-self:end; padding:10px 16px; border-radius:12px; border:0; cursor:pointer; color:#0c1023; font-weight:800; background:linear-gradient(135deg,#7aa2ff,#9a7bff); box-shadow:0 8px 20px rgba(122,162,255,.35); }
    .comment{ display:flex; gap:12px; padding:12px; border-radius:12px; background:rgba(255,255,255,.03); margin-top:10px; border:1px solid rgba(255,255,255,.05); }
    .avatar{ width:36px; height:36px; border-radius:50%; background:linear-gradient(135deg,#7aa2ff,#44d19f) }
    .comment .meta{ font-size:12px; color:var(--muted) }

    /* 모달 */
    .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal-content { background:var(--card); padding:20px; border-radius:10px; width:320px; text-align:center; position:relative; }
    .modal-content h2 { margin:0 0 10px; }
    .modal-content input { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #444; background:var(--soft); color:var(--text); }
    .modal-content button { margin-top:10px; padding:10px; width:100%; border:0; border-radius:6px; background:linear-gradient(135deg,#7aa2ff,#9a7bff); color:#fff; font-weight:bold; cursor:pointer; }
    .close { position:absolute; top:8px; right:12px; font-size:20px; cursor:pointer; }
    .disabled {opacity:0.5; pointer-events:none;}
  </style>
</head>
<body>

<header>
  <div class="banner">
    <div class="logo" aria-label="Weapon Challenger">
      <i></i><span>Weapon&nbsp;Challenger</span>
    </div>
    <nav>
      <a href="#about" id="nav-about">게임설명</a>
      <a href="#game" id="nav-game">게임 실행</a>
      <button id="loginBtn">로그인</button>
      <button id="logoutBtn" style="display:none;">로그아웃</button>
    </nav>
  </div>
</header>

<main class="wrap">
  <section id="game">
    <h2 class="section-title">웨폰첼린저 게임</h2>
    <p class="muted">아래 프레임에 Unity WebGL 빌드 또는 유튜브 영상이 삽입됩니다.</p>
    <div class="game-card">
      <div class="frame">
        <div class="stage">
          <iframe src="https://www.youtube.com/embed/VTjL98i1-_k" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </section>

  <section id="about" style="margin-top:28px">
    <h2 class="section-title">게임 설명</h2>
    <div class="cards">
      <article class="card grid-4">
        <h3>조작키</h3>
        <ul>
          <li>W / Space : 점프</li>
          <li>A / D : 좌우 이동</li>
          <li>J : 기본 공격</li>
          <li>K : 무기 스킬</li>
        </ul>
      </article>
      <article class="card grid-8">
        <h3>보스 정보</h3>
        <table>
          <thead><tr><th>보스명</th><th>체력</th><th>공격력</th><th>특징</th></tr></thead>
          <tbody>
            <tr><td>스톤 골렘</td><td>3000</td><td>120</td><td>광역 바위 투척</td></tr>
            <tr><td>크림슨 드레이크</td><td>4500</td><td>160</td><td>화염 브레스</td></tr>
          </tbody>
        </table>
      </article>
    </div>
  </section>
</main>

<footer class="wrap">
  <h2 class="section-title">댓글</h2>
  <div class="comment-box">
    <form id="commentForm">
      <input type="text" id="cname" placeholder="로그인 필요" disabled>
      <textarea id="ctext" placeholder="로그인 후 작성 가능" disabled></textarea>
      <button type="submit" disabled>댓글 등록</button>
    </form>
    <div id="comment-list"></div>
  </div>
</footer>

<!-- 로그인 모달 -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close" data-close="loginModal">&times;</span>
    <h2>로그인</h2>
    <input type="text" id="loginName" placeholder="이름">
    <input type="password" id="loginPass" placeholder="비밀번호">
    <button id="doLogin">로그인</button>
    <button id="openSignup">회원가입</button>
  </div>
</div>

<!-- 회원가입 모달 -->
<div id="signupModal" class="modal">
  <div class="modal-content">
    <span class="close" data-close="signupModal">&times;</span>
    <h2>회원가입</h2>
    <input type="text" id="signupName" placeholder="이름">
    <input type="password" id="signupPass" placeholder="비밀번호">
    <button id="doSignup">회원가입</button>
  </div>
</div>

<script>
  // 더미 회원 데이터
  let users = [];
  let currentUser = null;

  const loginModal = document.getElementById("loginModal");
  const signupModal = document.getElementById("signupModal");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  // 모달 열기
  loginBtn.onclick = ()=> loginModal.style.display="flex";
  document.getElementById("openSignup").onclick = ()=> { loginModal.style.display="none"; signupModal.style.display="flex"; };
  document.querySelectorAll(".close").forEach(btn=> btn.onclick = ()=> document.getElementById(btn.dataset.close).style.display="none");
  window.onclick = e => { if(e.target.classList.contains("modal")) e.target.style.display="none"; };

  // 회원가입
  document.getElementById("doSignup").onclick = ()=>{
    const name = document.getElementById("signupName").value.trim();
    const pass = document.getElementById("signupPass").value.trim();
    if(!name || !pass) return alert("모든 항목 입력");
    if(users.find(u=>u.name===name)) return alert("이미 존재하는 이름입니다");
    users.push({name, pass});
    alert("회원가입 완료!");
    signupModal.style.display="none";
  };

  // 로그인
  document.getElementById("doLogin").onclick = ()=>{
    const name = document.getElementById("loginName").value.trim();
    const pass = document.getElementById("loginPass").value.trim();
    const user = users.find(u=>u.name===name && u.pass===pass);
    if(!user) return alert("로그인 실패");
    currentUser = name;
    alert(name+"님 로그인 성공");
    loginModal.style.display="none";
    loginBtn.style.display="none";
    logoutBtn.style.display="inline";
    enableComments();
  };

  // 로그아웃
  logoutBtn.onclick = ()=>{
    currentUser = null;
    loginBtn.style.display="inline";
    logoutBtn.style.display="none";
    disableComments();
  };

  // 댓글 기능
  const cname = document.getElementById("cname");
  const ctext = document.getElementById("ctext");
  const cform = document.getElementById("commentForm");
  const clist = document.getElementById("comment-list");
  const cbtn = cform.querySelector("button");

  function enableComments(){
    cname.value = currentUser;
    cname.disabled = true;
    ctext.disabled = false;
    cbtn.disabled = false;
    ctext.placeholder = "댓글을 입력하세요";
  }

  function disableComments(){
    cname.value = "";
    cname.disabled = true;
    ctext.disabled = true;
    cbtn.disabled = true;
    ctext.placeholder = "로그인 후 작성 가능";
  }

  cform.addEventListener("submit", e=>{
    e.preventDefault();
    if(!currentUser) return alert("로그인 필요");
    const text = ctext.value.trim();
    if(!text) return alert("내용 입력");
    const div = document.createElement("div");
    div.className="comment";
    div.innerHTML = `<div class="avatar"></div><div><div class="meta">${currentUser}</div><div>${text}</div></div>`;
    clist.prepend(div);
    ctext.value="";
  });
</script>

</body>
</html>
